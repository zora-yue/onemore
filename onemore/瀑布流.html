<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
			.cont{margin:0 auto;position:relative;}
			.cont .box{float:left;padding:6px;}
			.cont .box .imgbox{border:1px solid #ccc; border-radius: 6px;padding:6px;}
			.cont .box .imgbox img{width:200px;display: block;}
        </style>
        <script>
            function waterFlow(){
                this.cont=document.querySelector(".cont");
                this.box=document.querySelectorAll(".box");
                this.clientW=document.documentElement.clientWidth;
                this.heightArr=[];
                this.init()
            }
            waterFlow.prototype.init=function(){
                this.maxnum=Math.floor(this.clientW/this.box[0].offsetWidth);
                this.cont.style.width=this.box[0].offsetWidth*this.maxnum+"px";
                this.fenhang();
            }
            waterFlow.prototype.fenhang=function(){
                for(var i=0;i<this.maxnum;i++){
                    this.first(i);
                }
                for(var i=this.maxnum;i<this.box.length;i++){
                    this.other(i);
                }
            }
            waterFlow.prototype.first=function(i){
                this.heightArr.push(this.box[i].offsetHeight)
            }
            waterFlow.prototype.other=function(i){
                this.min=this.getmin(this.heightArr)
                this.minIndex=this.heightArr.indexOf(this.min);
                console.log(this.min)
                this.box[i].style.position="absolute";
                this.box[i].style.top=this.min+"px";
                this.box[i].style.left=this.minIndex*this.box[0].offsetWidth+"px";
                this.heightArr[this.minIndex]+=this.box[i].offsetHeight;
            }

            waterFlow.prototype.getmin=function(arr){
                return arr.slice(0).sort((a,b)=>a-b)[0];
            }
            onload=function(){
                new waterFlow;
            }
        // onload=function(){
        //     new waterFlow;
        // }
        // function waterFlow(){
        //     this.cont=document.querySelector(".cont");
        //     this.box=document.querySelectorAll(".box");
        //     this.clientW=document.documentElement.clientWidth;
        //     this.heightArr=[];
        //     this.init();
        // }
        // waterFlow.prototype.init=function(){
        //     this.maxnum=Math.floor(this.clientW/this.box[0].offsetWidth);
        //     this.cont.style.width=this.box[0].offsetWidth*this.maxnum+"px";
        //     this.fenhang()
        // }
        // waterFlow.prototype.fenhang=function(){
        //     //第一行
        //     for(var i=0;i<this.maxnum;i++){
        //         // console.log(this.box[i])
        //         this.first(i)
        //     }
        //     for(var i=this.maxnum;i<this.box.length;i++){
        //         // console.log(this.box[i])
        //         this.other(i);
        //     }
        // }
        // waterFlow.prototype.first=function(i){
        //     //把第一排所有的高度存在数组里
        //     this.heightArr.push(this.box[i].offsetHeight)
        //     // console.log(this.box[i].offsetHeight)
        // }
        // waterFlow.prototype.other=function(i){
        //     // console.log(this.heightArr)
        //     //获取最小的高度
        //     this.min=this.getMin(this.heightArr);
        //     //获取最小高度图片所在的索引
        //     this.minIndex=this.heightArr.indexOf(this.min);
        //     // console.log(this.minIndex)
        //     //设置图片的定位
        //     this.box[i].style.position="absolute";
        //     //设置图片的top根据上一排最小的高度
        //     this.box[i].style.top=this.min+"px";
        //     //图片的left为最小图片的索引*图片的宽度
        //     this.box[i].style.left=this.minIndex*this.box[0].offsetWidth+"px";
        //     //累加高度
        //     this.heightArr[this.minIndex]+=this.box[i].offsetHeight;
        // }
        // waterFlow.prototype.getMin=function(arr){
        //     return arr.slice(0).sort((a,b)=>a-b)[0];
        // }
        </script>
</head>
<body>
        <div class="cont">
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/3.jpg"/>
                    </div>
                </div>
                <div class="box">
                        <div class="imgbox">
                            <img src="../img/1.jpg"/>
                        </div>
                    </div>
                    <div class="box">
                        <div class="imgbox">
                            <img src="../img/2.jpg"/>
                        </div>
                    </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/4.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/5.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/6.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/7.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/8.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/9.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/10.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/a.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/b.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/c.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/d.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/fei.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/1.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/2.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/3.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/4.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/5.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/6.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/7.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/8.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/9.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/10.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/a.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/b.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/c.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/d.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/fei.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/1.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/2.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/3.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/4.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/5.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/6.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/7.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/8.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/9.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/10.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/a.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/b.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/c.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/d.jpg"/>
                    </div>
                </div>
                <div class="box">
                    <div class="imgbox">
                        <img src="../img/fei.jpg"/>
                    </div>
                </div>
                
            </div>
</body>
</html>